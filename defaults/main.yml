# TODO: Escaping double curly braces in Ansible https://stackoverflow.com/questions/32279519/escaping-double-curly-braces-in-ansible
alacritty:
  template: "{{ T }}/alacritty.yml"
  values: "{{ V }}/alacritty.yml"

tag: []
output: ""
# ROLE COMPONENT
role_component:
  # pip:
  #   virtualenv: ""
  backup: true
  render_dir: "{{ playbook_dir }}/component_rendered_tasks"
  yaml_with_includes: true
  force_restart:  false
  ignore_errors:  true
  user:   "{{ ansible_user }}"
  group:  "{{ ansible_user }}"
  mode:   644
  run:    systemd

  components:
    - dummy

  dummy:
    name: "Dummy component - used for testing"
    install:
      # become: false
      packages:
        - git
    configs:
      templates:
        - name: dummy
          template: dummy.yaml
          dest: ~/.config/dummy.yaml
          # group: staff
          variables:
            foo: bar

  git:
    name: git
    install:
      packages:
        - git
    configs:
      templates:
        - name: gitconfig
          template: "gitconfig"
          dest: "~/.gitconfig"
          variables:
            aliases:
              - p = push
              - st = status -sb
              - ll = log --oneline
              - last = log -1 HEAD --stat
              - cm = commit -m
              - rv = remote -v
              - d = diff
              - dv = difftool -t vimdiff -y
              - gl = config --global -l
              - se = !git rev-list --all | xargs git grep -F

  alacritty:
    name: "Alacritty - GPU Terminal"
    install:
      pre:
        - name: "[alacritty] deps"
          package:
            name: cargo
            state: present
          become: true
      post:
        - name: "[alacritty] cargo install"
          shell: cargo install alacritty
    configs:
      templates:
        - name: alacritty
          template: alacritty.yml
          dest: "~/.config/alacritty/alacritty.yml"
          variables:
            font_size: 10.0
